---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout title="Blog - Liuye Zhao">
    <Header />
    <main>
        <section>
            <ul>
                {
                    posts.map((post) => (
                        <li>
                            <a href={`/blog/${post.slug}/`}>
                                <h4 class="title">{post.data.title}</h4>
                                <p class="date">
                                    {post.data.pubDate.toLocaleDateString(
                                        "zh-CN",
                                        {
                                            year: "numeric",
                                            month: "short",
                                            day: "numeric",
                                        },
                                    )}
                                </p>
                            </a>
                        </li>
                    ))
                }
            </ul>
        </section>
    </main>
</Layout>

<style>
    main {
        width: 960px;
        max-width: calc(100% - 2em);
        margin: auto;
        padding: 3rem 1rem;
    }
    ul {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        list-style-type: none;
        margin: 0;
        padding: 0;
    }
    li {
        width: 100%; /* List view */
        background: rgba(255, 255, 255, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        padding: 1.5rem;
        transition: all 0.3s ease;
    }
    li:hover {
        background: rgba(255, 255, 255, 0.8);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    li * {
        text-decoration: none;
        transition: 0.2s ease;
    }

    .title {
        margin: 0;
        color: rgb(var(--black));
        line-height: 1;
        font-size: 1.5rem;
    }
    .date {
        margin: 0;
        color: rgb(var(--gray));
        margin-top: 0.5rem;
    }
    li:hover .date {
        color: rgb(var(--accent));
    }
</style>
