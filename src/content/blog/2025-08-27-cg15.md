---
title: "计算机图形学15:实体建模"
description: ""
pubDate: "2025-08-27"
heroImage: ""
---

# 计算机图形学15:实体建模

### **1\. 超越表面：为什么需要实体建模？**

传统的**线框模型 (Wireframe Models)** 和**表面模型 (Surface Models)** 在很多工程和制造任务中都存在致命的缺陷。

*   **线框模型的歧义性：** 一个线框模型只存储了物体（如立方体）的顶点和边，这会导致严重的视觉歧义（例如，无法判断一个面是朝前还是朝后），甚至可以表示物理上不可能存在的物体。
    
*   **表面模型的局限性：** 虽然多边形网格等表面模型解决了歧义性问题，并且足以进行视觉渲染，但它仍然是一个“空心壳”。对于许多关键的工程应用，表面模型力不从心：
    
    *   **物理属性计算：** 无法直接计算物体的质量、体积、重心、转动惯量。
    *   **干涉检查：** 难以可靠地判断两个物体是否发生碰撞或穿插。
    *   **数控编程 (NC Machining):** 无法为机床提供从毛坯上“切掉”哪些材料的信息。
    *   **有效性验证：** 一个由面片随意拼接的表面模型，不一定能构成一个物理上可实现的、“水密”的实体。

为了克服这些局限，**实体建模**应运而生。它的目标是提供一种**信息完整、无歧义**的物体三维表示方法。

### **2\. 什么是“实体 (Solid)”？**

在进入具体的建模方法之前，我们必须对“实体”这个概念有一个严格的定义。一个有效的实体模型应该满足以下几个基本属性：

*   **有界性 (Finite):** 物体在空间中占据有限的范围。
*   **三维同质性:** 物体内部是“满”的，没有悬空的维度。
*   **刚性 (Rigid):** 物体不会随意变形。
*   **边界清晰:** 能够明确区分物体的内部、外部和边界。
*   **布尔运算封闭:** 对两个实体进行并、交、差运算后，结果仍然是一个有效的实体。

### **3\. 实体建模的三大主流方法**

表示一个实体主要有三种核心的思路：**分解法 (Decomposition)**、**构造法 (Constructive)** 和 **边界法 (Boundary)**。

#### **3.1 分解法：空间剖分表示 (Spatial Partitioning)**

这种方法通过将物体所在的三维空间分解为一系列小的、不重叠的单元格来表示实体。一个单元格的状态可以是\*\*“完全在物体内部”、“完全在外部”或“部分在内部”\*\*。

*   **体素表示 (Voxel Representation / Spatial Occupancy Enumeration):**
    
    *   **思想：** 将空间划分为一个规则的、三维的像素网格（体素网格）。实体被表示为所有“内部”体素的集合。
    *   **优点：** 算法简单，布尔运算容易实现。
    *   **缺点：** 存储开销巨大，且只能近似表示曲面。
    *   **应用：** 医学成像（如CT、MRI扫描结果）、科学计算可视化。
*   **八叉树 (Octrees):**
    
    *   **思想：** 体素表示的一种**层级化、自适应**的优化。它从一个包含整个物体的巨大立方体开始，进行递归的八分（Octal）剖分。
        *   如果一个立方体单元完全在物体内部（**全满**）或完全在外部（**全空**），则停止剖分，该单元成为叶节点。
        *   如果一个立方体单元与物体边界相交（**部分**），则将其等分为8个子立方体，并对每个子立方体递归执行此过程。
    *   **优点：** 相比于固定分辨率的体素，极大地减少了存储需求，尤其是在表示大块均匀区域时。
    *   **缺点：** 仍然是近似表示，且数据结构相对复杂。

#### **3.2 构造法：构造实体几何 (Constructive Solid Geometry - CSG)**

CSG是一种功能强大且非常符合设计直觉的建模方法。

*   **思想：** 从一组简单的**基本几何体 (Primitives)**（如长方体、圆柱体、球体、圆锥体）开始，通过**正则化的布尔运算 (Regularized Boolean Operations)**（并 Union, 交 Intersection, 差 Difference）来像搭积木一样构造出复杂的物体。
*   **数据结构：** CSG模型通常被存储为一棵**二叉树**，即**CSG树**。
    *   **叶节点 (Leaf Nodes):** 基本几何体。
    *   **内部节点 (Internal Nodes):** 布尔运算（U, ∩, -）或几何变换（平移、旋转、缩放）。
*   **优点：**
    *   **数据量小、结构紧凑：** 只需存储树的结构和基本体的参数。
    *   **保证有效性：** 只要基本体是有效的实体，通过正则化布尔运算得到的结果也必然是有效的实体。
    *   **参数化与修改方便：** 修改模型通常只需要改变树中某个节点的参数即可。
*   **缺点：**
    *   **非唯一性：** 同一个复杂物体可以由不同的CSG树构造出来。
    *   **边界计算困难：** 直接从CSG树中获取物体的边界信息（如边和面）非常困难，需要执行昂贵的“边界求值”算法。这使得直接渲染CSG模型很慢，通常需要先将其转换为边界表示。
*   **应用：** 工业设计、机械CAD、参数化建模。

#### **3.3 边界表示法 (Boundary Representation - B-rep)**

B-rep是目前CAD/CAM和大多数图形应用中**最主流**的实体表示方法。

*   **思想：** 不关心物体的内部，而是通过**完整地、无歧义地**描述物体的**边界**来定义实体。它将物体的边界分解为一组拓扑实体：**面 (Faces)**、**边 (Edges)** 和 **顶点 (Vertices)**。
*   **数据结构：** B-rep模型同时存储两种信息：
    *   **几何信息 (Geometry):** 顶点的精确坐标，边的曲线方程，面的曲面方程。
    *   **拓扑信息 (Topology):** 实体之间的**邻接和连接关系**。例如，哪个面拥有哪些边，哪条边连接了哪两个顶点，哪条边是哪两个面的公共边界等。常用的数据结构有**翼边结构 (Winged-Edge)** 等。
*   **有效性与流形 (Manifold):** 一个有效的B-rep模型必须是**二维流形 (2-Manifold)**。通俗地讲，这意味着在物体表面的任意一点，其局部都像一个可被展平的二维圆盘。这保证了模型是“水密的”，没有悬空的边或面，每条边恰好被两个面共享。
*   **欧拉公式 (Euler's Formula):** 对于一个没有洞的简单多面体，其顶点数(V)、边数(E)和面数(F)必须满足欧拉公式：$V - E + F = 2$。这个公式（及其推广形式）是验证B-rep模型拓扑有效性的重要工具。**欧拉操作 (Euler Operators)** 是一组能够保证在创建和修改B-rep模型时始终维持其拓扑有效性的原子操作。

**优点：**

*   **边界信息明确：** 非常适合直接渲染和进行边界相关的计算。
*   **表达能力强：** 可以精确地表示具有复杂自由曲面的物体。
*   **易于直接操作：** 方便用户进行交互式的特征编辑（如倒角、拉伸）。

**缺点：**

*   **数据结构复杂：** 需要维护复杂的几何与拓扑关系。
*   **有效性验证困难：** 确保一个复杂的B-rep模型始终有效是一个巨大的挑战。
*   **布尔运算不稳定：** 对两个复杂的B-rep模型进行布尔运算时，由于浮点数精度问题，非常容易产生微小的缝隙或重叠，导致结果无效。

### **4\. 其他表示方法：扫描表示 (Sweep Representations)**

*   **思想：** 通过将一个二维轮廓（或点、曲线）沿着一条路径**扫描**来生成三维实体。
    *   **平移扫描 (Translational Sweep / Extrusion):** 沿直线路径扫描。
    *   **旋转扫描 (Rotational Sweep / Revolution):** 绕一根轴旋转扫描。
*   **特点：** 这是一种强大的**建模操作**，而非一种独立的底层数据表示。通过扫描创建的物体，最终通常会被转换为CSG或B-rep格式进行存储。