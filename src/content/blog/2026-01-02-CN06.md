---
title: "计算机网络06：应用层"
description: ""
pubDate: "2026-01-02"
heroImage: ""
---

# 计算机网络06：应用层

## 本节重点

1.  网络应用模型
2.  域名系统（DNS）
3.  文件传输协议（FTP）
4.  电子邮件（E-mail）
5.  万维网（WWW）

## 1\. 网络应用模型

​ 网络应用模型描述了应用进程之间如何组织通信，最常见的就是**C/S 模型**和 **P2P 模型**。

### 1.1 C/S 模型

​ C/S（Client/Server）模型中，服务器集中提供服务并长期在线，客户端按需向服务器发起请求并接收响应。其具体工作流程如下：

1.  服务器处于接受请求的状态。
2.  客户端发出服务请求，并等待接收结果。
3.  服务器接收请求、处理业务逻辑，并将结果返回给客户端。
4.  客户端接收响应，连接可保持或关闭。

​ 该模型主要有以下特点：

*   **角色分工明确**：服务器提供服务，客户端请求服务
*   **集中管理**：数据和控制集中在服务器，易维护、易管理
*   **可靠性高**：服务器通常具备较高性能和稳定性
*   **扩展性受限**：服务器可能成为性能瓶颈和单点故障

### 1.2 P2P 模型

​ P2P（Peer-to-Peer）模型中，各节点地位平等，既可请求服务也可提供服务，资源分布在多个节点之间。

​ 相较于C/S 模型，该模型有以下优点：

*   **去中心化**：不依赖固定服务器，避免单点故障问题
*   **扩展性强**：节点越多，系统整体资源和服务能力越强
*   **负载分散**：计算、存储和带宽压力由各节点共同承担
*   **容错性好**：个别节点失效不会影响整体服务
*   **资源利用率高**：充分利用终端节点的闲置计算和带宽资源

同时该模型也有缺点。在获取服务的同时，还要给其他节点提供服务，因此会占用较多的内存，从而影响整机速度。

![](..\images\ComputerNetwork\网络应用模型.png)

## 2\. 域名系统（DNS）

​ 域名系统（DNS）是互联网中用于将人类易读的域名解析为IP地址的分布式命名系统，是互联网正常运行的基础服务之一。

### 2.1 层次域名空间

​ DNS 采用**树状层次结构**来组织域名，各层从右到左依次细化：

*   **根域（.）**：域名空间的最顶层
*   **顶级域（TLD）**：如 `.com`、`.org`、`.cn`
*   **二级域 / 子域**：如 `example.com`、`edu.cn`
*   **主机名**：如 `www.example.com`

![](..\images\ComputerNetwork\域名空间的树状结构.png)

### 2.2 域名服务器

​ 为管理庞大的域名空间，DNS 使用**分布式域名服务器系统**：

*   **根域名服务器**：保存顶级域服务器的信息
*   **顶级域名服务器（TLD）**：负责管理对应顶级域（如 `.com`）
*   **权威域名服务器**：保存具体域名到 IP 地址的映射记录
*   **本地域名服务器（LDNS）**：通常由运营商或单位部署，负责为用户查询并缓存结果

​ 各级服务器分工明确、相互协作，避免了集中式系统的性能和可靠性问题。

![](..\images\ComputerNetwork\DNS层次结构.png)

### 2.3 域名解析过程

​ 域名解析是指把域名转化为IP地址的过程。当客户端需要域名解析，通过本机的DNS客户端构造一个DNS请求报文，以UDP数据报方式发往本地域名服务器。

​ 域名解析有两种方式：**递归查询**和**递归查询**。

*   主机向本地域名服务器的查询都采用**递归查询**
*   本地域名服务器向其他域名服务器采用**递归查询**和**递归查询**

​ 解析过程简单来说分为下面步骤：

1.  主机向**本地域名服务器**发起递归查询
2.  若无缓存，本地服务器向**根服务器**查询
3.  根服务器返回对应的 **TLD 服务器地址**
4.  本地服务器再向 **TLD 服务器**查询权威服务器
5.  向**权威域名服务器**查询，获得目标 IP 地址
6.  本地服务器将结果返回主机并缓存

## 3\. 文件传输协议（FTP）

​ 文件传输协议（FTP）是一种用于在客户端与服务器之间传输文件的应用层协议，采用客户—服务器模型，并使用独立的控制连接和数据连接来完成通信。

​ FTP提供以下**功能**：

*   提供不同种类主机系统之间的文件传输能力
*   以用户权限管理的方式提供用户对远程FTP服务器上的文件管理能力
*   以匿名FTP的方式提供公用文件共享的能力

​ FTP**工作步骤**如下：

*   **建立控制连接并完成认证**：客户端连接服务器 21 号端口，完成用户登录
*   **发送控制命令**：客户端通过控制连接发送目录、下载或上传等命令
*   **建立并使用数据连接**：按需建立数据连接，完成文件或目录数据传输
*   **结束会话**：传输完成后关闭数据连接和控制连接

​ FTP 在工作时使用两个并行的 TCP 连接：**控制连接**和**数据连接**。

*   **控制连接**：用于在客户端与服务器之间传输控制命令和状态响应，由客户端主动发起并连接服务器的 21 号端口。该连接在整个 FTP 会话期间持续存在，只承载命令与应答信息，不传输实际文件数据。
*   **数据连接**：用于传输实际的文件内容或目录列表，仅在需要数据传输时建立，传输完成后立即关闭。数据连接可以采用主动模式或被动模式建立，与控制连接相互独立。

## 4\. 电子邮件（E-mail）

​ 电子邮件系统是互联网中最早、最重要的应用之一。

![](..\images\ComputerNetwork\email.png)

### 4.1 电子邮件系统的组成结构

​ 电子邮件系统采用**客户—服务器模型**，主要包括以下组件：

*   **用户代理（UA）**：供用户编写、发送、接收和阅读邮件的程序，如邮件客户端或 Web 邮箱
*   **邮件服务器**：负责接收、存储、转发邮件
*   **发送方服务器与接收方服务器**：邮件通过服务器之间转发完成传递

​ 邮件的基本流程是：发送方用户代理 → 发送方邮件服务器 → 接收方邮件服务器 → 接收方用户代理。

### 4.2 电子邮件格式与 MIME

#### 4.2.1 电子邮件格式

​ 电子邮件由两部分组成：

*   **邮件首部**：包含 From、To、Subject、Date 等控制信息
*   **邮件主体**：邮件的实际内容，最初仅支持 ASCII 文本

#### 4.2.2 MIME

​ 因为SMTP只能传送7位ASCII码文本邮件，为支持图片、音频、视频及非 ASCII 文本，引入了 MIME：

*   允许邮件携带**多媒体内容和多种编码格式**
*   在邮件首部增加 MIME 相关字段
*   不改变 SMTP，只扩展邮件内容的表示方式

### 4.3 SMTP

​ 简单邮件传输协议（SMTP）是一种提供可靠且有效的电子邮件传输的协议。 通信通常分为以下 **三个阶段**：

*   **连接建立**：发送方邮件服务器（或用户代理）与接收方邮件服务器通过 TCP（通常 25 号端口）建立连接，双方进行初始问候，确认通信能力。
*   **邮件传输**：发送方依次发送发件人地址、收件人地址和邮件内容，服务器对每一步给出响应，完成邮件数据的传输。
*   **连接终止**：邮件发送完成后，发送方发出结束命令，服务器确认后关闭 TCP 连接，SMTP 会话结束。

### 4.4 POP3

​ POP3 是一种用于用户从邮件服务器接收电子邮件的应用层协议，采用客户端主动拉取的方式工作。客户端通过 TCP 连接服务器（通常使用 110 端口），对用户进行身份验证后下载邮件内容，并可选择在下载后删除或保留服务器上的邮件副本。POP3 结构简单、实现容易，但功能有限，适合在单一终端上收取和管理邮件。

## 5\. 万维网（WWW）

​ 万维网（WWW）是一个分布式、联机式的信息存储空间。在这空间中，一样有用的事物称为一样资源，并由一个全域统一资源定位符（URL）标识。

### 5.1 万维网的构成

​ 万维网（WWW）的内核部分主要由以下三个部分构成：

*   **URL（统一资源定位符）**：用于唯一标识万维网上的各种资源，并指明访问资源所使用的协议和位置。其一般形式为：`<协议>://<主机>:<端口>/<路径>`
    
*   **HTTP（超文本传输协议）**：定义浏览器与 Web 服务器之间请求和响应的通信规则，是万维网数据传输的基础。
    
*   **HTML（超文本标记语言）**：用于描述网页的结构和内容，使浏览器能够正确显示文本、图片和链接等信息。
    

### 5.2 超文本传输协议（HTTP）

​ HTTP（HyperText Transfer Protocol）是万维网中最核心的应用层协议，用于规范浏览器（客户端）与 Web 服务器之间的请求与响应交互。它采用客户—服务器模型，基于 TCP 进行可靠传输，负责传送网页及其相关资源（如图片、视频等）。

#### 5.3.1 HTTP的操作过程

​ HTTP 的基本操作过程如下：

1.  客户端与服务器建立 TCP 连接（默认端口 80，HTTPS 为 443）；
2.  客户端向服务器发送 HTTP 请求报文，请求指定资源；
3.  服务器处理请求并返回 HTTP 响应报文；
4.  客户端解析响应内容并显示网页；
5.  根据连接方式，关闭或保持 TCP 连接。

![](..\images\ComputerNetwork\万维网的工作过程.png)

#### 5.3.2 HTTP的特点

​ HTTP具有以下特点：

*   **无连接（HTTP/1.0）**：每次请求—响应完成后关闭连接（HTTP/1.1 支持持久连接）
*   **无状态**：服务器不保存客户端状态，需要通过 Cookie、Session 等机制补充
*   **简单灵活**：报文结构清晰，易扩展
*   **基于请求/响应模型**：通信由客户端发起

#### 5.3.3 HTTP的报文结构

​ HTTP 报文分为两类：**请求报文**和**响应报文**，基本结构相似，均包括：

*   **开始行**
    *   请求行（方法、URL、HTTP版本）
    *   状态行（HTTP版本、状态码、原因短语）
*   **首部行**：描述报文属性（如 Host、Content-Type、Content-Length 等）
*   **空行**：标志首部结束
*   **实体主体**：传输的实际数据（可选）

![](..\images\ComputerNetwork\HTTP的报文结构.png)